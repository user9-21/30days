cat > values.json <<EOF
{  "name": "$GOOGLE_CLOUD_PROJECT",
   "location": "us",
   "storageClass": "multi_regional"
}
EOF
cat values.json


#open : https://developers.google.com/oauthplayground/
#Enter this in scope and click authorize API:  https://www.googleapis.com/auth/devstorage.full_control
#Now login and Click on Exchange authorization code for tokens and copy the access tocken and paste in export OAUTH2_TOKEN=

export OAUTH2_TOKEN=

export PROJECT_ID=$GOOGLE_CLOUD_PROJECT
echo $OAUTH2_TOKEN
echo $PROJECT_ID
curl -X POST --data-binary @values.json \
    -H "Authorization: Bearer $OAUTH2_TOKEN" \
    -H "Content-Type: application/json" \
    "https://www.googleapis.com/storage/v1/b?project=$PROJECT_ID"

wget --output-document demo-image.png https://cdn.qwiklabs.com/E4%2BSx10I0HBeOFPB15BFPzf9%2F%2FOK%2Btf7S0Mbn6aQ8fw%3D
export OBJECT=$(realpath demo-image.png)
export BUCKET_NAME=$GOOGLE_CLOUD_PROJECT
echo $OBJECT
echo $BUCKET_NAME
curl -X POST --data-binary @$OBJECT \
    -H "Authorization: Bearer $OAUTH2_TOKEN" \
    -H "Content-Type: image/png" \
    "https://www.googleapis.com/upload/storage/v1/b/$BUCKET_NAME/o?uploadType=media&name=demo-image"
